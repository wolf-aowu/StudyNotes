# 初识 Linux

## 初识

### Linux 内核

Linux 系统的核心是内核。内核<font color = skyblue>控制</font>着计算机系统上的所有<font color = skyblue>硬件和软件</font>，在必要时分配硬件， 并根据需要执行软件。

内核主要功能：

1. 系统内存管理
2. 软件程序管理
3. 硬件设备管理
4. 文件系统管理

#### 系统内存管理

内核不仅管理服务器上的可用物理内存，还可以创建和管理虚拟内存（即实际并不存在的内存）。

内核通过硬盘上的存储空间来实现虚拟内存，这块区域称为交换空间（swap space）。内核不断地在交换空间和实际的物理内存之间反复交换虚拟内存中的内容。这使得系统以为它拥有比物理内存更多的可用内存，如下图所示。

![](图片\Linux 系统内存映射.png)

<center>Linux 系统内存映射</center>

内存存储单元按组划分成很多块，这些块称作页面（page）。内核将每个内存页面放在物理内存或交换空间。然后，内核会维护一个内存页面表，指明哪些页面位于物理内存内，哪些页面被换到了磁盘上。

内核会记录哪些内存页面正在使用中，并自动把一段时间未访问的内存页面复制到交换空间区域（称为换出，swapping out）——即还有可用内存。当程序要访问一个已被换出的内存页面时，内核必须从物理内存换出另外一个内存页面给它让出空间，然后从交换空间换入请求的内存页面。显然，这个过程要花费时间，拖慢运行中的进程。只要Linux 系统在运行，为运行中的程序换出内存页面的过程就不会停歇。

#### 软件程序管理

<font color = skyblue>Linux 操作系统将运行中的程序称为进程。</font>进程可以在前台运行，将输出显示在屏幕上，也可以在后台运行，隐藏到幕后。内核控制着 Linux 系统如何管理运行在系统上的所有进程。

内核创建了第一个进程（称为 init 进程）来启动系统上所有其他进程。当内核启动时，它会将 init 进程加载到<font color = skyblue>虚拟内存</font>中。内核在启动任何其他进程时，都会在虚拟内存中给新进程分配一块专有区域来存储该进程用到的数据和代码。

一些 Linux 发行版使用一个表来管理在系统开机时要<font color = skyblue>自动启动</font>的进程。在 Linux 系统上，这个表通常位于专门文件<font color = skyblue> /etc/inittab </font>中。另外一些系统（比如现在流行的 Ubuntu Linux 发行版）则采用<font color = skyblue> /etc/init.d </font>目录，将开机时启动或停止某个应用的脚本放在这个目录下。这些脚本通过<font color = skyblue> /etc/rcX.d </font>目录下的入口（entry）启动，这些入口实际上是到 /etc/init.d 目录中启动脚本的符号链接。 这里的 X 代表运行级（run level）。

Linux 操作系统的 init 系统采用了<font color = skyblue>运行级</font>。运行级决定了 init 进程运行 /etc/inittab 文件或 /etc/rcX.d 目录中定义好的某些特定类型的进程。Linux 操作系统有 5 个启动运行级。<font color = skyblue>运行级为 1 时</font>，只启动基本的系统进程以及一个控制台终端进程。我们称之为单用户模式。单用户模式通常用来在系统有问题时进行紧急的文件系统维护。显然，在这种模式下，仅有一个人（通常是系统管理员）能登录到系统上操作数据。<font color = skyblue>标准的启动运行级是 3。</font>在这个运行级上，大多数应用软件，比如网络支持程序，都会启动。 <font color = skyblue>另一个Linux中常见的运行级是 5。</font>在这个运行级上系统会启动图形化的 X Window 系统，允许用户通过图形化桌面窗口登录系统。Linux 系统可以通过调整启动运行级来控制整个系统的功能。通过将运行级从 3 调整成 5，系统就可以从基于控制台的系统变成更先进的图形化 X Window 系统。

#### 硬件设备管理

内核的另一职责是管理硬件设备。任何 Linux 系统需要与之通信的设备，都需要在内核代码中加入其驱动程序代码。驱动程序代码相当于应用程序和硬件设备的中间人，允许内核与设备之间交换数据。

在 Linux 内核中有两种方法用于插入设备驱动代码：

1. 编译进内核的设备驱动代码
2. 可插入内核的设备驱动模块

以前，插入设备驱动代码的唯一途径是重新编译内核。每次给系统添加新设备，都要重新编译一遍内核代码。随着 Linux 内核支持的硬件设备越来越多，这个过程变得越来越低效。不过好在 Linux 开发人员设计出了一种更好的将驱动代码插入运行中的内核的方法。开发人员提出了内核模块的概念。它允许将驱动代码插入到运行中的内核而无需重新编译内核。同时，当设备不再使用时也可将内核模块从内核中移走。这种方式极大地简化和扩展了硬件设备在Linux上的使用。

Linux 系统将硬件设备当成特殊的文件，称为设备文件。设备文件有 3 种分类：

1. 字符型设备文件
2. 块设备文件
3. 网络设备文件

<font color = skyblue>字符型设备文件是指处理数据时每次只能处理一个字符的设备。</font>大多数类型的调制解调器和终端都是作为字符型设备文件创建的。

<font color = skyblue>块设备文件是指处理数据时每次能处理大块数据的设备</font>， 比如硬盘。 

<font color = skyblue>网络设备文件是指采用数据包发送和接收数据的设备</font>，包括各种网卡和一个特殊的回环设备。这个<font color = skyblue>回环设备</font>允许 Linux 系统使用常见的网络编程协议同自身通信。 Linux 为系统上的每个设备都创建一种称为<font color = skyblue>节点</font>的特殊文件。与设备的所有通信都通过设备节点完成。每个节点都有唯一的数值对供 Linux 内核标识它。数值对包括一个主设备号和一 个次设备号。类似的设备被划分到同样的主设备号下。次设备号用于标识主设备组下的某个特定设备。

#### 文件系统管理

不同于其他一些操作系统，Linux 内核支持通过不同类型的文件系统从硬盘中读写数据。除了自有的诸多文件系统外，Linux 还支持从其他操作系统（比如 Microsoft Windows）采用的文件系统中读写数据。内核必须在编译时就加入对所有可能用到的文件系统的支持。下表列出了 Linux 系统用来读写数据的标准文件系统。

| 文件系统 | 描述                                                |
| -------- | --------------------------------------------------- |
| ext      | Linux 扩展文件系统，最早的 Linux 文件系统           |
| ext2     | 第二扩展文件系统，在 ext 的基础上提供了更多的功能   |
| ext3     | 第三扩展文件系统，支持日志功能                      |
| ext4     | 第四扩展文件系统，支持高级日志功能                  |
| hpfs     | OS/2 高性能文件系统                                 |
| jfs      | IBM 日志文件系统                                    |
| iso9660  | ISO 9660文件系统（CD-ROM）                          |
| minix    | MINIX 文件系统                                      |
| msdos    | 微软的 FAT16                                        |
| ncp      | Netware 文件系统                                    |
| nfs      | 网络文件系统                                        |
| ntfs     | 支持 Microsoft NT 文件系统                          |
| proc     | 访问系统信息                                        |
| ReiserFS | 高级 Linux 文件系统，能提供更好的性能和硬盘恢复功能 |
| smb      | 支持网络访问的 Samba SMB 文件系统                   |
| sysv     | 较早期的 Unix 文件系统                              |
| ufs      | BSD 文件系统                                        |
| umsdos   | 建立在 msdos 上的类 Unix 文件系统                   |
| vfat     | Windows 95 文件系统（FAT 32）                       |
| XFS      | 高性能 64 位日志文件系统                            |

Linux 服务器所访问的所有硬盘都必须格式化成上表所列文件系统类型中的一种。Linux内核采用虚拟文件系统（Virtual File System，VFS）作为和每个文件系统交互的接口。这为 Linux 内核同任何类型文件系统通信提供了一个标准接口。当每个文件系统都被挂载和使用时，VFS（虚拟文件系统）将信息都缓存在内存中。

### GNU 工具

除了由内核控制硬件设备外，操作系统还需要工具来执行一些标准功能，比如控制文件和程序。Linus 在创建 Linux 系统内核时，并没有可用的系统工具。GNU组织（GNU是GNU’s Not Unix的缩写）开发了一套完整的 Unix 工具，但没有可以运行它们的内核系统。这些工具是在名为开源软件（open source software，OSS）的软件理念下开发的。将 Linus 的 Linux 内核和 GNU 操作系统工具整合起来，就产生了一款完整的、功能丰富的免费操作系统。尽管通常将 Linux 内核和 GNU 工具的结合体称为 Linux，但你也会在互联网上看到一些 Linux 纯粹主义者将其称为 GNU/Linux 系统，藉此向GNU组织所作的贡献致意。

#### 核心 GNU 工具

GNU 项目的主旨在于为 Unix 系统管理员设计出一套类似于 Unix 的环境。这个目标促使该项目移植了很多常见的 Unix 系统命令行工具。供 Linux 系统使用的这组核心工具被称为 coreutils（core  utilities）软件包。

GNU coreutils软件包由三部分构成：

1. 用以处理文件的工具
2. 用以操作文本的工具
3. 用以管理进程的工具

这三组主要工具中的每一组都包含一些对 Linux 系统管理员和程序员至关重要的工具。

#### shell

GNU/Linux shell 是一种特殊的交互式工具。它为用户提供了启动程序、管理文件系统中的文件以及运行在 Linux 系统上的进程的途径。shell 的核心是命令行提示符。命令行提示符是 shell 负责交互的部分。它允许你输入文本命令，然后解释命令，并在内核中执行。 shell 包含了一组内部命令，用这些命令可以完成诸如复制文件、移动文件、重命名文件、显示和终止系统中正运行的程序等操作。shell 也允许你在命令行提示符中输入程序的名称，它会将程序名传递给内核以启动它。 你也可以将多个 shell 命令放入文件中作为程序执行。这些文件被称作 shell 脚本。你在命令行上执行的任何命令都可放进一个 shell 脚本中作为一组命令执行。这为创建那种需要把几个命令放在一起来工作的工具提供了便利。 在 Linux 系统上，通常有好几种 Linux shell 可用。不同的shell有不同的特性，有些更利于创建脚本，有些则更利于管理进程。所有 Linux 发行版默认的 shell 都是 bash shell。bash shell 由 GNU 项目开发，被当作标准 Unix shell——Bourne shell（以创建者的名字命名）的替代品。bash shell 的名称就是针对Bourne shell 的拼写所玩的一个文字游戏，称为 Bourne again shell。 除了 bash shell，下表列出了 Linux 中常见的几种不同 shell。

| shell | 描述                                                         |
| ----- | ------------------------------------------------------------ |
| ash   | 一种运行在内存受限环境中简单的轻量级 shell，但与 bash shell 完全兼容 |
| korn  | 一种与 Bourne shell 兼容的编程 shell，但支持如关联数组和浮点运算等一些高级的编程特性 |
| tcsh  | 一种将 C 语言中的一些元素引入到 shell 脚本中的 shell         |
| zsh   | 一种结合了 bash、tcsh 和 korn 的特性，同时提供高级编程特性、共享历史文件和主题化提示符的高级 shell |

大多数 Linux 发行版包含多个 shell，但它们通常会采用其中一个作为默认 shell。如果你的 Linux 发行版包含多个 shell，就请尽情尝试不同的 shell，看看哪个能满足你的需要。

#### Linux 桌面环境

在 Linux 的早期（20世纪90年代初期），能用的只有一个简单的 Linux 操作系统文本界面。这个文本界面允许系统管理员运行程序，控制程序的执行，以及在系统中移动文件。随着 Microsoft Windows 的普及，电脑用户已经不再满足于对着老式的文本界面工作了。这推动了 OSS 社区的更多开发活动，Linux 图形化桌面环境应运而生。完成工作的方式不止一种，Linux 一直以来都以此而闻名。在图形化桌面上更是如此。Linux  有各种图形化桌面可供选择。后面会介绍其中一些比较流行的桌面。

##### X Window 系统

有两个基本要素决定了视频环境：显卡和显示器。要在电脑上显示绚丽的画面，Linux 软件就得知道如何与这两者互通。X Window 软件是图形显示的核心部分。X Window软件是直接和 PC 上的显卡及显示器打交道的底层程序。它控制着 Linux 程序如何在 电脑上显示出漂亮的窗口和图形。Linux 并非唯一使用 X Window 的操作系统，它有针对不同操作系统的版本。在 Linux 世界里，能够实现 X Window 的软件包可不止一种。 其中最流行的软件包是 X.org。它提供了 X Window 系统的开源实现，支持当前市面上的很多新显卡。 另外两个 X Window 软件包也日渐流行。Fedora Linux 发行版采用了试验性的 Wayland 软件；Ubuntu Linux 发行版开发出了 Mir 显示服务器，用于其桌面环境。在首次安装 Linux 发行版时，它会检测显卡和显示器，然后创建一个含有必要信息的 X  Window 配置文件。在安装过程中，你可能会注意到安装程序会检测一次显示器，以此来确定所支持的视频模式。有时这会造成显示器黑屏几秒。由于现在有多种不同类型的显卡和显示器，这个过程可能会需要一段时间来完成。 核心的 X Window 软件可以产生图形化显示环境，但仅此而已。虽然对于运行独立应用这已经足够，但在日常 PC 使用中却并不是那么有用。它没有桌面环境供用户操作文件或是开启程序。为此，你需要一个建立在 X Window 系统软件之上的桌面环境。

##### KDE 桌面

KDE（K Desktop Environment，K桌面环境）最初于 1996 年作为开源项目发布。它会生成一个类似于 Microsoft Windows 的图形化桌面环境。如果你是 Windows 用户，KDE 就集成了所有你熟悉的功能。下图展示了运行在 openSuSE Linux 发行版上的KDE 4 桌面。

![](图片\Linux 桌面\openSuSE Linux 系统上的 KDE 4 桌面.png)

KDE桌面允许你把应用程序图标和文件图标放置在桌面的特定位置上。单击应用程序图标，Linux 系统就会运行该应用程序。单击文件图标，KDE 桌面就会确定使用哪种应用程序来处理该文件。 桌面底部的横条称为面板，由以下四部分构成：

1. KDE菜单：和 Windows 的开始菜单非常类似，KDE 菜单包含了启动已安装程序的链接。
2. 程序快捷方式：在面板上有直接从面板启动程序的快速链接。
3. 任务栏：任务栏显示着当前桌面正运行的程序的图标。
4. 小应用程序：面板上还有一些特殊小应用程序的图标，这些图标常常会根据小应用程序的状态发生变化。

所有的面板功能都和在 Windows 上看到的类似。除了桌面功能，KDE 项目还开发了大量的可运行在 KDE 环境中的应用程序。

##### GNOME 桌面

GNOME（the GNU Network Object Model Environment，GNU网络对象模型环境）是另一个 流行的 Linux 桌面环境。GNOME 于 1999 年首次发布，现已成为许多 Linux 发行版默认的桌面环境 （不过用得最多的是 Red Hat Linux）。 尽管 GNOME 决定不再沿用 Microsoft Windows 的标准观感（look-and-feel），但它还是集成了许多 Windows用户习惯的功能：

1. 一块放置图标的桌面区域
2. 两个面板区域
3. 拖放功能

下图展示了 CentOS Linux 发行版采用的标准 GNOME 桌面。

![](图片\Linux 桌面\CentOS Linux 系统上的 GNOME 桌面.png)

GNOME 开发人员也开发了一批集成进 GNOME 桌面的图形化程序。

##### Unity 桌面

如果你用的是 Ubuntu Linux 发行版，你会注意到它与 KDE 和 GNOME 桌面环境有些不一样。准确来说，这是因为负责开发 Ubuntu 的公司决定采用自己的一套叫作 Unity的 Linux 桌面环境。Unity 桌面得名于该项目的目标——为工作站、平板电脑以及移动设备提供一致的桌面体验。不管是在工作站还是在手机上使用 Ubuntu，Unity 桌面的使用方式都是一样的。下图展示了 Ubuntu 14.04 LTS 中的 Unity 桌面。

![](图片\Linux 桌面\Ubuntu Linux 系统上的 Unity 桌面.png)

##### 其他桌面

图形化桌面环境的弊端在于它们要占用相当一部分的系统资源来保证正常运行。在Linux 发展之初，Linux 的标志和卖点之一就是它可以运行在处理能力较弱的老旧 PC 上，这些 PC 无力运行较新的微软桌面。然而随着 KDE 和 GNOME 桌面环境的普及，情况发生了变化。运行 KDE 或 GNOME 桌面要占用的内存资源和微软的最新桌面环境旗鼓相当。 如果你的 PC 已经有些年代了，也不要泄气。Linux 开发人员已经联手让Linux 返璞归真。他们开发了一些低内存开销的图形化桌面应用，提供了能够在老旧 PC上完美运行的基本功能。尽管这些图形化桌面环境并没有大量专为其设计的应用，但它们仍然能运行许多基本的图形化程序，支持如文字处理、电子表格、数据库、绘图以及多媒体等功能。 下表列出了一些可在配置较低的PC和笔记本电脑上运行的轻量级Linux 图形化桌面环境。

| 桌面    | 描述                                                         |
| ------- | ------------------------------------------------------------ |
| Fluxbox | 一个没有面板的轻型桌面，仅有一个可用来启动程序的弹出式菜单   |
| Xfce    | 和 KDE 很像的一个桌面，但少了很多图像以适应低内存环境        |
| JWM     | Joe 的窗口管理器（Joe’s Window Manager），非常适用于低内存低硬盘空间环境的超轻型桌面 |
| Fvwm    | 支持如虚拟桌面和面板等高级桌面功能，但能够在低内存环境中运行 |
| fvwm95  | 从 fvwm 衍生而来，但看起来更像是 Windows 95 桌面             |

这些图形化桌面环境并不如 KDE 或 GNOME 桌面一样绚丽，但却提供了恰到好处的基本图形化功能。下图展示了 Puppy Linux antiX 发行版所采用的 JWM 桌面的外观。

![](图片\Linux 桌面\Puppy Linux 发行版所采用的 JWM 桌面.png)

### Linux 发行版

我们将完整的 Linux 系统包称为发行版。有很多不同的 Linux 发行版来满足可能存在的各种运算需求。大多数发行版是为某个特定用户群定制的，比如商业用户、多媒体爱好者、软件开发人员或者普通家庭用户。每个定制的发行版都包含了支持特定功能所需的各种软件包，比如为多媒体爱好者准备的音频和视频编辑软件，为软件开发人员准备的编译器和集成开发环境（IDE）。 

不同的 Linux 发行版通常归类为3种：

1. 完整的核心 Linux 发行版
2. 特定用途的发行版
3. LiveCD 测试发行版

#### 核心 Linux 发行版

核心 Linux 发行版含有内核、一个或多个图形化桌面环境以及预编译好的几乎所有能见到的 Linux 应用。它提供了一站式的完整 Linux 安装。下表列出了一些较流行的核心Linux 发行版。

| 发行版    | 描述                                                 |
| --------- | ---------------------------------------------------- |
| Stackware | 最早的 Linux 发行版中的一员，在 Linux 极客中比较流行 |
| Red Hat   | 主要用于 Internet 服务器的商业发行版                 |
| Fedora    | 从 Red Hat 分离出的家用发行版                        |
| Gentoo    | 为高级 Linux 用户设计的发行版，仅包含 Linux 源代码   |
| openSUSE  | 用于商用和家用的发行版                               |
| Debian    | 在 Linux 专家和商用 Linux 产品中流行的发行版         |

在 Linux 的早期，发行版是作为一叠软盘发布的。你必须下载多组文件，然后将其复制到软盘上。通常要用 20 张或更多的软盘来创建一个完整的发行版！毋庸多言，这是个痛苦的过程。现今，家用电脑基本都有内置的 CD 和 DVD 光驱，Linux 发行版也就用一组 CD 光盘或单张 DVD 光盘来发布。这大大简化了 Linux 的安装过程。然而当新手在安装核心 Linux 发行版时，仍然经常遇到各种各样的问题。为了照顾到 Linux 用户的所有使用情景，单个发行版必须包含很多应用软件。从高端的 Internet 数据库服务器到常见的游戏，可谓应用尽有。鉴于 Linux 上可用应用程序的数量，一个完整的发行版通常至少要 4 张 CD。 尽管发行版中的大量可选配置对 Linux 极客来说是好事，但对新手来说就是一场噩梦。多数发行版会在安装过程中询问一系列问题，以决定哪些应用要默认加载、PC 上连接了哪些硬件以及怎样配置硬件设备。新手经常会被这些问题困扰，因此，他们经常是要么加载了过多的程序， 要么没有加载够，到后来才发现计算机并没有按照他们预想的方式工作。 对新手来说，幸运的是，安装 Linux 还有更简便的方法。

#### 特定用途的 Linux 发行版

Linux 发行版的一个新子群已经出现了。它们通常基于某个主流发行版，但仅包含主流发行版中一小部分用于某种特定用途的应用程序。除了提供特定软件外（比如仅为商业用户提供的办公应用），定制化发行版还尝试通过自动检测和自动配置常见硬件来帮助新手安装 Linux。这使得 Linux 的安装过程轻松愉悦了许多。下表列出了一些特定用途的 Linux 发行版以及它们的专长。这只是特定用途的 Linux 发行版中的一小部分而已。像这样的发行版足有上百款，而且在互联网上还不断有新的成员加入。不管你的专长是什么，你都能找到一款为你量身定做的 Linux 发行版。

| 发行版      | 描述                                                 |
| ----------- | ---------------------------------------------------- |
| CentOS      | 一款基于 Red Hat 企业版 Linux 源代码构建的免费发行版 |
| Ubuntu      | 一款用于学校和家庭的免费发行版                       |
| PCLinuxOS   | 一款用于家庭娱乐的免费发行版                         |
| Mint        | 一款用于家庭娱乐的免费发行版                         |
| dyne:bolic  | 一款用于音频和 MIDI 应用的免费发行版                 |
| Puppy Linux | 一款适用于老旧 PC 的小型免费发行版                   |

#### Linux LiveCD

Linux 世界中一个相对较新的现象是可引导的 Linux CD 发行版的出现。它无需安装就可以看到 Linux 系统是什么样的。多数现代 PC 都能从 CD 启动，而不是必须从标准硬盘启动。基于这点，一些 Linux 发行版创建了含有 Linux 样本系统（称为Linux LiveCD）的可引导 CD。由于单张 CD 容量的限制，这个样本并非完整的 Linux 系统，不过令人惊喜的是，你可以自己加入各种软件。结果就是，你可以通过 CD 来启动 PC，并且无需在硬盘安装任何东西就能运行 Linux 发行版。这是一个不弄乱 PC 就体验各种 Linux 发行版的绝妙方法。只需插入 CD 就能引导了！所有的 Linux 软件都将直接从 CD 上运行。你可以从互联网上下载各种 Linux LiveCD，刻录，然后体验。下表列出了一些可用的流行 Linux LiveCD。

| 发行版      | 描述                                                |
| ----------- | --------------------------------------------------- |
| Knoppix     | 来自德国的一款 Linux 发行版，也是最早的LiveCD Linux |
| PCLinuxOS   | 一款成熟的 LiveCD 形式的 Linux 发行版               |
| Ubuntu      | 为多种语言设计的世界级 Linux 项目                   |
| Stax        | 基于 Slackware Linux 的一款 LiveCD Linux            |
| Puppy Linux | 为老旧 PC 设计的一款全功能 Linux                    |

你能在这张表中看到熟悉的面孔。许多特定用途的 Linux 发行版都有对应的 Linux LiveCD 版本。一些 Linux LiveCD 发行版，比如 Ubuntu，允许直接从 LiveCD 安装整个发行版。这使你可以从 CD 引导启动，先体验一下此 Linux 发行版，如果喜欢的话，再把它安装到硬盘上。这个功能极其方便易用。 就像所有美好的事物一样，Linux LiveCD 也有一些不足之处。由于要从 CD 上访问所有东西， 应用程序会运行得更慢，而如果再搭配上陈旧缓慢的 PC 和光驱，那更是慢上加慢。还有，由于无法向CD写入数据，对 Linux 系统作的任何修改都会在重启后失效。不过，有一些Linux LiveCD的改进帮助解决了上述一些问题。这些改进包括：

1. 能将 CD 上的 Linux 系统文件复制到内存中
2. 能将系统文件复制到硬盘上
3. 能在U盘上存储系统设置
4. 能在U盘上存储用户设置

一些 Linux LiveCD，如 Puppy Linux，只包含最少数量的 Linux 系统文件。当 CD 引导启动时，LiveCD 的启动脚本直接把它们复制到内存中。这允许在 Linux 启动后立即把 CD 从光驱中取走。这不仅提高了程序运行速度（因为程序从内存中运行时更快），而且还空出了 CD 光驱，供你用 Puppy  Linux 自带的软件转录音频 CD 或播放视频 DVD。 其他 Linux LiveCD 用另外的方法，同样允许你在启动后将 CD 从光驱中拿走。这种方法是将核心 Linux 文件作为一个文件复制到 Windows 硬盘上。待 CD 启动后，系统会寻找那个文件，并从中读取系统文件。dyne:bolic Linux LiveCD 采用的就是这种技术，我们称之为对接。当然，你必须在从CD引导启动之前把系统文件复制到硬盘里。 一种非常流行的技术就是用常见的 U 盘（也称为闪存或闪盘）来存储 Linux LiveCD 会话数据。几乎每个 Linux LiveCD 都能识别插入的 U 盘（即使是在 Windows 下格式化的）并从 U 盘上读写文件。 这允许你启动 Linux LiveCD，使用 Linux 应用来创建文件，再将这些文件存储在 U 盘上，然后用 Windows 应用（或者在另外一台电脑上）访问这些文件。这该有多酷！

### shell

#### 命令行

在图形化桌面出现之前，与 Unix 系统进行交互的唯一方式就是借助由 shell 所提供的文本命令行界面（command line interface，CLI）。CLI 只能接受文本输入，也只能显示出文本和基本的图形输出。由于这些限制，输出设备并不需要多华丽。通常只需要一个简单的哑终端就可以使用 Unix 系统。所谓的哑终端无非就是利用通信电缆（一般是一条多线束的串行电缆）连接到 Unix 系统上的一台显示器和一个键盘。这种简单的组合可以轻松地向 Unix 系统中输入文本数据，并查看文本输出结果。 如你所知，如今的Linux 环境相较以前已经发生了巨大变化。所有的 Linux 发行版都配备了某种类型的图形化桌面环境。但是，如果想输入 shell 命令，仍旧需要使用文本显示来访问 shell 的 CLI。于是现在的问题就归结为一点：有时还真是不容易在 Linux 发行版上找到进入 CLI 的方法。

##### 控制台终端

进入 CLI 的一种方法是让 Linux 系统退出图形化桌面模式，进入文本模式。这样在显示器上就只有一个简单的 shell CLI，跟图形化桌面出现以前一样。这种模式称作 Linux 控制台，因为它仿真了早期的硬接线控制台终端，而且是一种同 Linux 系统交互的直接接口。 Linux 系统启动后，它会自动创建出一些虚拟控制台。虚拟控制台是运行在 Linux系统内存中的终端会话。无需在计算机上连接多个哑终端，大多数 Linux 发行版会启动5~6 个（有时会更多） 虚拟控制台，你在一台计算机的显示器和键盘上就可以访问它们。

##### 图形化终端

除了虚拟化终端控制台，还可以使用 Linux 图形化桌面环境中的终端仿真包。终端仿真包会在一个桌面图形化窗口中模拟控制台终端的使用。下图展示了一个运行在 Linux 图形化桌面环境中的终端仿真器。

![](图片\运行在 Linux 桌面上的终端仿真器.png)

图形化终端仿真只负责 Linux 图形化体验的一部分。完整的体验效果需要借助多个组件来实现，其中就包括图形化终端仿真软件（称为客户端）。下表展示了 Linux 图形化桌面环境的不同组成部分。

| 名称       | 例子                                   | 描述                                                  |
| ---------- | -------------------------------------- | ----------------------------------------------------- |
| 客户端     | 图形化终端仿真器，桌面环境，网络浏览器 | 请求图形化服务的应用                                  |
| 显示服务器 | Mir，Wayland Compositor，Xserver       | 负责管理显示（屏幕）和输入设备（键盘、鼠标、触 摸屏） |
| 窗口管理器 | Compiz，Metacity，Kwin                 | 为窗口加入边框，提供窗口移动和管理功能                |
| 部件库     | Athenal（Xaw），X Intrinsics           | 为桌面环境中的客户端添加菜单以及外观项                |

要想在桌面中使用命令行，关键在于图形化终端仿真器。可以把图形化终端仿真器看作 GUI 中（in the GUI）的 CLI 终端，将虚拟控制台终端看作 GUI 以外（outside the GUI）的 CLI 终端。理解各种终端及其特性能够提高你的命令行体验。

通过 Linux 控制台终端访问 CLI 

在 Linux 的早期，在启动系统时你只会在显示器上看到一个登录提示符，除此之外就没别的了。之前说过，这就是 Linux 控制台。它是唯一可以为系统输入命令的地方。尽管在启动时会创建多个虚拟控制台，但很多 Linux 发行版在完成启动过程之后会切换到图 形化环境。这为用户提供了图形化登录以及桌面体验。这样一来，就只能通过手动方式来访问虚拟控制台了。在大多数Linux发行版中，你可以使用简单的按键组合来访问某个 Linux 虚拟控制台。通常必须按下 Ctrl + Alt 组合键，然后按功能键（F1~F7）进入要使用的虚拟控制台。功能键 F1 生成虚拟控制台 1，F2 键生成虚拟控制台 2，F3 键生成虚拟控制台 3，F4 键生成虚拟控制台 4，依次类推。

Linux 发行版通常使用 Ctrl + Alt 组合键配合 F1 或 F7 来进入图形界面。Ubuntu 使用 F7，而 RHEL 则使用 F1。最好还是测试一下自己所使用的发行版是如何进入图形界面的。

文本模式的虚拟控制台采用全屏的方式显示文本登录界面。下图展示了一个虚拟控制台的文本登录界面。

![](图片\Linux 虚拟控制台登录界面.png)

注意，在上图中第一行文本的最后有一个词 tty2。这个词中的 2 表明这是虚拟控制台 2，可以通过 Ctrl+Alt+F2 组合键进入。tty 代表电传打字机（teletypewriter）。这是一个古老的名词，指的是一台用于发送消息的机器。

不是所有的 Linux 发行版都会在登录界面上显示虚拟控制台的 tty 号。

在 login: 提示符后输入用户 ID，然后再在 Password: 提示符后输入密码，就可以进入控制台终端了。如果你之前从来没有用过这种方式登录，那要注意在这里输入密码和在图形环境中输入不太一样。在图形环境中，输入密码的时候会看到点号或星号，但是在虚拟控制台中，输入密码的时候什么都不会显示。登入虚拟控制台之后，你就进入了 Linux CLI。记住，在 Linux 虚拟控制台中是无法运行任何图形化程序的。 一旦登录完成，你可以保持此次登录的活动状态，然后在不中断活动会话的同时切换到另一个虚拟控制台。你可以在所有虚拟控制台之间切换，拥有多个活动会话。在使用 CLI 时，这个特性为你提供了巨大的灵活性。 还有一些灵活性涉及虚拟控制台的外观。尽管虚拟控制台只是文本模式的控制台终端，但你可以修改文字和背景色。 比如可将终端的背景色设置成白色、文本设置成黑色，这样可让眼睛轻松些。登录之后，有好几种方法可实现这样的修改。其中一种方法是输入命令 `setterm -inversescreen on`，然 后按回车键，如下图所示。注意，在途中我们使用选项 on 启用了 inversescreen 特性。也可以使用选项 off 关闭该特性。

![](图片\启用了 inversescreen 的 Linux 虚拟控制台.png)

另一种方法是连着输入两条命令。输入 `setterm –background white`，然后按回车键， 接着输入 `setterm –foreground black`，再按回车键。要注意，因为先修改的是终端的背景色，所以可能会很难看清接下来输入的命令。 在上面的命令中，你不用像 inversescreen 那样去启用或关闭什么特性。共有 8 种颜色可供选择，分别是 black、red、green、yellow、blue、magenta、cyan 和 white（这种颜色在有些发行版中看起来像灰色）。你可以赋予纯文本模式的控制台终端富有创意的外观效果。下表 展示了 setterm 命令的一些选项，可以用于增进控制台终端的可读性，或改善外观。

| 选项           | 参数                                                     | 描述                                             |
| -------------- | -------------------------------------------------------- | ------------------------------------------------ |
| -background    | black、red、green、yellow、blue、 magenta、cyan 或 white | 将终端的背景色改为指定颜色                       |
| -foreground    | black、red、green、yellow、blue、 magenta、cyan 或 white | 将终端的前景色改为指定颜色                       |
| -inversescreen | on 或 off                                                | 交换背景色和前景色                               |
| -reset         | 无                                                       | 将终端外观恢复成默认设置并清屏                   |
| -store         | 无                                                       | 将终端当前的前景色和背景色设置成 -reset 选项的值 |

如果不涉及 GUI，虚拟控制台终端访问 CLI 自然是不错的选择。但有时候需要一边访问 CLI， 一边运行图形化程序。使用终端仿真软件包可以解决这个问题，这也是在 GUI 中访问 shell CLI 的一种流行的方式。接下来的部分将介绍能够提供图形化终端仿真的常见软件包。

#### 通过图形化终端仿真访问 CLI

相较于虚拟化控制台终端，图形化桌面环境提供了更多访问 CLI 的方式。在图形化环境下，有大量可用的图形化终端仿真器。每个软件包都有各自独特的特性及选项。下表列举出了一些流行的图形化终端仿真器软件包及其网址。

| 名称             | 网址                                                         |
| ---------------- | ------------------------------------------------------------ |
| Eterm            | http://www.eterm.org                                         |
| Final Term       | http://finalterm.org                                         |
| GNOME Terminal   | https://help.gnome.org/users/gnome-terminal/stable           |
| Guake            | https://github.com/Guake/guake                               |
| Konsole Terminal | http://konsole.kde.org                                       |
| LillyTerm        | http://lilyterm.luna.com.tw/index.html                       |
| LXTerminal       | http://wiki.lxde.org/en/LXTerminal                           |
| mrxvt            | https://code.google.com/p/mrxvt                              |
| ROXTerm          | http://roxterm.sourceforge.net                               |
| rxvt             | http://sourceforge.net/projects/rxvt                         |
| rxvt-unicode     | http://software.schmorp.de/pkg/rxvt-unicode                  |
| Sakura           | https://launchpad.net/sakura                                 |
| st               | http://st.suckless.org                                       |
| Terminator       | https://launchpad.net/terminator                             |
| Terminology      | http://ww.enlightenment.org/p.php?p=about/terminology        |
| tilda            | http://tilda.sourceforge.net/tildaabout.php                  |
| UXterm           | http://manpages.ubuntu.com/manpages/gutsy/man1/uxterm.1.html |
| Wterm            | http://sourceforge.net/projects/wterm                        |
| xterm            | http://invisible-island.net/xterm                            |
| Xfce4 Terminal   | http://docs.xfce.org/apps/terminal/start                     |
| Yakuake          | http://extragear.kde.org/apps/yakuake                        |

GNOME Terminal、Konsole Terminal 和 xterm，通常都会默认安装在 Linux 发行版中。

#### 使用 GNOME Terminal 仿真器



## 常识

---

终端仿真器（terminal emulator）：用于让用户访问 shell。

---

shell 提示符：`[username@machinename 路径]$`，示例：`[me@linuxbox ~]$`。如果最后一个字符时是 #，那么终端会话将享有超级用特权，这意味着我们是以根用户身份登录，拥有超级用户管理特权。

---

按上下方向键可以调用先前的命令。

---

鼠标焦点：当我们在窗口管理器的配置程序中设置焦点策略为焦点跟随鼠标时，我们可以将鼠标移到 terminal 窗口，只要不点击 terminal 窗口，terminal 窗口不会显示在前端，但是会聚焦在 terminal 窗口，此时可以输入命令进 terminal 窗口。

---

虚拟控制台：即使没有与逆行终端仿真器，一些会话也会在后台运行。

在大部分系统中，按下 `Ctrl + Alt + F1` 到  `Ctrl + Alt + F6` 的组合键，可以打开大部分 Linux 中的终端会话。按下 `Alt + F1` 到 `Alt + F6` 可以从一个虚拟控制台切换到另一个虚拟控制台。

---

``Alt + F7` 可以返回图形桌面环境。

---

Windows 与 Linux 文件系统的区别：

Windows 中，每一个存储设备都有一个独立的文件系统树。而类 UNIX 系统中，如 Linux，无论多少驱动器或存储设备与计算机相连，通常只有一个文件系统树。根据系统管理员的设置，存储设备将会连接（或者说 挂载）到文件系统树的不同位置。系统管理员要负责系统的维护。

## 简单的命令

### 显示系统时间和日期

tg：显示当前时间	tg：显示当前日期	tg：显示时间	tg：显示日期	tg：显示系统时间	tg：显示系统日期	tg：查看时间	tg：查看日期

```shell
date
```

![](图片\显示系统日期和时间.png)

### 显示当月月历

tg：显示月历	tg：显示当月月历	tg：显示月历

```shell
cal
```

![](图片\显示当月月历.png)

### 查看磁盘可用空间

tg：查看磁盘空间	tg：磁盘空间	tg：查看磁盘可用空间	tg：查看空间	tg：查看磁盘空间

```shell
df
```

### 显示可用内存

tg：显示内存	tg：查看内存	tg：查看可用内存

```shell
free
```

### 结束终端会话

tg：结束终端	tg：关闭终端

```shell
exit
```

# 导航文件系统

## 显示当前工作目录

tg：显示当前目录	tg：显示当前路径	tg：显示当前文件夹路径	tg：显示当前所在路径

第一次登录系统 或 启动终端仿真器会话时，当前工作目录会被设置成主目录。每个用户账号都有一个主目录，作为普通用户操作时，这是唯一一个允许用户写文件的地方。

```shell
pwd
```

![](图片\显示当前工作目录.png)

## 列出目录内容

tg：列出目录内容	tg：显示目录下内容	tg：显示文件夹下内容

```shell
ls
```

![](图片\列出目录内容.png)

## 更改当前工作目录
